!function(t){function e(i){if(a[i])return a[i].exports;var r=a[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e){AFRAME.registerComponent("refraction",{schema:{enabled:{default:!0},ratio:{type:"number",default:.985},reflectivity:{type:"number",default:.9}},init:function(){var t=this.el.sceneEl.object3D;this.refractCamera=new THREE.CubeCamera(.1,5e3,512),t.add(this.refractCamera),this.refractCamera.renderTarget.mapping=THREE.CubeRefractionMapping,this.refractMaterial=new THREE.MeshBasicMaterial({color:13421823,envMap:this.refractCamera.renderTarget,refractionRatio:this.data.ratio,reflectivity:this.data.reflectivity}),this.originalMaterial=this.el.object3DMap.mesh.material},update:function(){this.data.enabled?(this.el.object3DMap.mesh.material=this.refractMaterial,this.refractCamera.position=this.position,this.data.ratio<.912&&(this.data.ratio=.912),this.data.ratio>1&&(this.data.ratio=1),this.data.reflectivity<.6&&(this.data.reflectivity=.6),this.data.reflectivity>1.2&&(this.data.reflectivity=1.2),this.refractMaterial.refractionRatio=this.data.ratio,this.refractMaterial.reflectivity=this.data.reflectivity):this.el.object3DMap.mesh.material=this.originalMaterial},tick:function(){this.refractCamera&&this.refractCamera.updateCubeMap(this.el.sceneEl.renderer,this.el.sceneEl.object3D)},remove:function(){if(this.refractCamera){var t=this.el.sceneEl.object3D;t.remove(this.refractCamera),this.refractCamera=null,this.el.object3DMap.mesh.material=this.originalMaterial}},pause:function(){},play:function(){}})}]);